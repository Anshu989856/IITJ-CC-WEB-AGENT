{
    "file_name": "server_admin_manual_configuration_files_external_storage_s3_compatible_object_storage_as_primary.html",
    "file_path": "./owncloud_docs\\server_admin_manual_configuration_files_external_storage_s3_compatible_object_storage_as_primary.html",
    "chunks": [
        {
            "cluster": 2,
            "chunk_content": "Documentation for ownCloud (A Kiteworks Company)\nownCloud Server\nIntroduction\nAdmin Manual\nIntroduction\nUseful Pages\nFAQ\nGDPR\nInstallation\nDeployment Considerations\nDeployment Recommendations\nNFS\nSystem Requirements\nConfiguration Notes and Tips\nInstallation Options\nInstalling With Docker\nManual Installation on Linux\nDetailed Installation Guide\nDetailed Installation on Ubuntu (various versions)\nQuick Installation Guide\nOn Ubuntu 20.04\nOn Ubuntu 22.04\nLinux Package Manager\nLinux Package Manager Installation\nThe Installation Wizard\nTroubleshooting\nChanging Your ownCloud URL\nInstalling and Managing Apps\nSupported Apps\nMedia Viewer\nSELinux Configuration\nUsing Let’s Encrypt SSL Certificates\nUsing Letsencrypt\nApache\nConfiguration\nDatabase\nDatabase Conversion\nDatabase Configuration\nEncryption\nEncryption Configuration\nEncryption Configuration Quick Guide\nExternal Storage\nExternal Storage Configuration\nExternal Storage Authentication Mechanisms\nAmazonS3\nDropbox\nFTP\nGoogle\nLocal\nownCloud\nS3 as Primary\nSFTP\nSMB\nWebDAV\nFiles and Sharing\nBig File Upload Configuration\nManual File Locking\nDefault Files Configuration\nFederated Cloud Sharing Configuration\nFile Sharing Configuration\nFile Versioning\nTransactional File Locking\nPreview Configuration\nMimetypes\nManaging the Trashbin\nIntegration\nMicrosoft Teams\nownCloud App for Splunk\nGeneral Topics\nCode Signing\nImpersonate Users\nFull Text Search\nServer\nActivity Configuration\nBackground Jobs Configuration\nCaching Configuration\nConfig Sample PHP Parameters\nConfig Apps Sample PHP Parameters\nCustom Client Repos\nEmail Configuration\nExcluded Blacklisted Files\nExternal Sites\nHarden Server\nImport SSL Cert\nIndex PHP Less URLs\nOCC Command\nLanguage Configuration\nLegal Settings Configuration\nLogging\nLogging Configuration\nRequest Tracing\nReverse Proxy Configuration\nSecurity\nBrute-Force Protection\nOAuth2\nPassword policy\nSecurity Setup Warnings\nThe HSM (Hardware Security Module) Daemon\nDependency Notes\nServer Tuning\nThird Party PHP Configuration\nVirus Scanner Support\nUI Configuration\nUser\nUser Management\nUser Roles\nReset Admin Password\nReset User Password\nUser Auth FTP SMB IMAP\nUser Auth LDAP\nUser Auth Two-Factor\nUser Auth OAuth2\nUser Provisioning API\nCustom Groups App\nGuests App\nOpenID Connect (OIDC)\nLogin Policies\nMaintenance\nUpgrading\nManual Upgrade\nDatabase Upgrade\nUpgrading from Package\nUsing the Updater App\nUpgrading PHP\nMarketplace Apps\nBackup and Restore\nBackup\nRestore\nMaintenance Mode\nExport and Import Instance Data\nManually Moving Data Folders\nEncryption\nMigrating from User Key to Master Key Encryption\nMigrating to a Different Server\nMigrating to Kiteworks PCN\nEnterprise\nAuthentication\nEnterprise Only Authentication\nKerberos Authentication\nClients\nCustom Client Repos\nCollaboration\nCollabora Online / Secure View\nMicrosoft Office Online / WOPI Integration\nDocument Classification\nClassify Documents and Enforce Policies\nExternal Storage\nLDAP Home Connector Configuration\nSharepoint integration Configuration\nWindows Network Drive Configuration\nWND Configuration Quick Guide\nFile Management\nFile Tagging\nFile Lifecycle Management\nFirewall\nFile Firewall\nInstallation\nInstalling & Upgrading ownCloud Enterprise Edition\nOracle DB Setup & Configuration\nLogging\nAuditing\nReporting\nMetrics\nGenerate a Config Report\nSecurity\nRansomware Protection\nUser Management\nShibboleth Integration\nSAML 2.0 Based SSO\nTroubleshooting\nGeneral Troubleshooting\nPath and Filename Length Limitations\nRetrieve Log Files and Configuration Settings\nRemove Non-Existent Background Jobs\nFound a Mistake? Developer Manual\nIntroduction\nGeneral Contributor Guidelines\nCommunity Code of Conduct\nCoding Style & General Guidelines\nDebugging\nPerformance Considerations\nSecurity Guidelines\nBackporting\nHelp and Communication\nDeveloping ownCloud Core\nIntroduction\nSetup Your Development Environment\nApplication Configuration\nTheming\nTranslation\nCode Standards Compliance\nTesting\nownCloud Test Pilots\nDrone Testing\nUnit Testing\nAcceptance Tests\nUser Interface Testing\nAvailable APIs\nThe External API\nThe Provisioning API\nOCS\nThe OCS Notifications API (v1)\nThe OCS REST API\nThe OCS Recipient API\nThe OCS Share API\nThe OCS TOTP Validation API\nThe OCS User Sync API\nNotify Public Link By Email\nThe Roles API\nWebDAV APIs\nThe Comments API\nThe Custom Groups Management API\nThe Files Versions API\nThe Meta API\nThe Search API\nThe Tags API\nThe Trash Bin API\nThe Public Files API\nApplication Development\nFundamental Concepts\nApplication Metadata\nThe Classloader\nConfiguration\nRouting\nControllers\nTemplates\nJavaScript\nCSS\nMiddleware\nDatabase Connectivity\nBackground Jobs\nLogging\nTesting\nThe DI Container\nFilesystem\nRESTful API\nHooks\nPublishing in the ownCloud Marketplace\nChangelog\nMarket App\nAdvanced Concepts\nCustom Filesystem Caches\nCustom Storage Backends\nNotifications\nStorage Backends\nExternal Storage Backends\nTranslation\nTwo-Factor Providers\nUser Management\nCode Signing\nTutorial\nMinimum Requirements\nThe Request Life Cycle\nThe Core Application Files\nRoutes and Controllers\nDatabase Connectivity\nCreate Template Content\nCreate a Navigation Menu\nAdd JavaScript and CSS\nWiring it Up\nApply the Finishing Touches\nAdd a RESTful API\nWriting Tests\nMobile Development\nAndroid\nLibrary Installation\nExamples\niOS\nLibrary Installation\nExamples\nBugtracker\nCode Reviews\nBug Triaging\nFound a Mistake? ownCloud Server UI\nIntroduction\nThe WebUI\nWeb Interface\nNavigating the WebUI\nPersonal Settings\nGeneral\nStorage\nSharing\nSecurity\nCustom Groups\nFiles\nAccess WebDAV\nSharing Files\nSearch & Full Text Search\nTagging Files\nComments\nVersion Control\nEncrypting Files\nManaging Deleted Files\nLarge File Uploads\nManual File Locking\nFile Lifecycle Management\nPublic Link Shares\nFederated Cloud Sharing\nManaging Connected Browsers and Devices\nOnline Collaboration\nStorage Quotas\nExternal Storage\nConnecting to SharePoint\nDesktop Mobile Sync\nApps\nActivity\nCalendar\nContacts\nMarket\nMedia Viewer App\nIntegration\nMicrosoft Teams\nSynchronization Clients\nSync iOS\nSync KDE\nSync OSX\nSync Thunderbird\nTroubleshooting\nFound a Mistake? Using\nfiles_primary_s3\nreplaces the default ownCloud\nowncloud/data\ndirectory. However, you\nneed\nto keep the\nowncloud/data\ndirectory for the following reasons:\nThe ownCloud log file is saved in the data directory. Legacy apps may not support using anything but the\nowncloud/data\ndirectory. Even if the ownCloud log file is stored in an alternate location (by changing the location in\nconfig.php\n),\nowncloud/data\nmay still be required for backward compatibility with some apps. Implications\nRead the following implications carefully\nBEFORE\nyou start using\nfiles_primary_s3\n:\nApply this configuration before the first login of any user – including the admin user; otherwise, ownCloud can no longer find the user’s files. In \"object store\" mode as primary storage access, ownCloud expects exclusive access to the object store container, because it only stores the binary data for each file. While in this mode, ownCloud stores the metadata in the local database for performance reasons. The current implementation is\nincompatible\nwith any app that uses direct file I/O (input/output) as it circumvents the ownCloud virtual file system. As ownCloud only stores the binary data in S3, while the metadata of the files is still stored on the DB, a regular database backup is highly recommended, as this is also needed for recovery in addition to the S3 backup! metrics app\n//'availableStorage' => 1099511627776,\n//\n// uncomment to enable server side encryption\n//'serversideencryption' => 'AES256',\n//\n// part size in bytes, applies to uploads between ownCloud and S3. // Adjust for the common file sizes that are to uploaded to the ownCloud instance. 'use_path_style_endpoint' => false,\n// replace with the Wasabi endpoint URL for your bucket\n'endpoint' => 'https://s3.us-east-2.wasabisys.com',\n],\n],\n],\n];\nownCloud\nSFTP\nAbout ownCloud\nThe Secure Collaboration Platform\nNews\nPrivacy statement\nImprint\nResources\nFAQ\nHelp\nSecurity\nChangelog\nGet started\nInteract\nRocket.Chat\nForum\nContribute\nCustomer support\n© Copyright 2011-2025, The ownCloud developers."
        },
        {
            "cluster": 0,
            "chunk_content": "ownCloud Server\n10.15\nDesktop App\nnext\n5.3\n5.2\nInfinite Scale Documentation\nnext\n7.1\n7.0\nMobile App for Android\nnext\n4.5\n4.4\nMobile App for iOS\nnext\n12.4\n12.3\nownCloud Main Page\nownCloud Server\nnext\n10.15\n10.14\nownCloud Web User Interfaces\nnext\nownCloud Server\nAdmin Manual\nConfiguration\nExternal Storage\nS3 as Primary\nnext\n10.15\n10.14\nEdit this Page\nS3 Compatible Object Storage as Primary Storage Location\nTable of Contents\nIntroduction\nImplications\nConfiguration\nAmazon S3\nCeph S3\nScality S3\nBackblaze S3\nWasabi S3\nIntroduction\nAdministrators can configure Amazon-S3-compatible object storages as the primary ownCloud storage location with the\nS3 Primary Object Storage\napp. The referencing name is\nfiles_primary_s3\n. That said,\nObject Storage Support\n(\nobjectstore\n) is still available, but the\nS3 Primary Object Storage\napp is the preferred and only supported way to provide S3 storage support as primary storage. ownCloud provides consulting for migrations from\nobjectstore\n→\nfiles_primary_s3\n. Consider the following differentiation:\nExternal Storage: S3\nIntegrate S3 object storages as external storages\nS3 Primary Object Storage\nLeverage object storage via S3 as primary storage\nOpenStack Swift has been deprecated. When using\nfiles_primary_s3\n, the Amazon S3 bucket to be used needs to be created manually first, according to the\nAmazon S3 developer documentation\nand versioning needs to be enabled for this bucket. Therefore encrypting the S3 primary storage via ownCloud has been disabled and can not be enabled\nWhen requiring encryption for the bucket containing the primary storage, use the bucket built-in encryption provided by the S3 API. When using S3 primary storage with multiple buckets, it is\nnot recommended\nto use the command to transfer file ownership between users\n(\nocc files:transfer-ownership\n)\nas shares on the files can get lost. The reason for this is that file IDs are changed during such cross-storage move operations. Any object store needs to implement\n\\OCP\\Files\\ObjectStore\\IObjectStore\nand can be passed parameters in the constructor with the\narguments\nkey, as in the following example:\n<?php\n$CONFIG = [\n'objectstore' => [\n'class' => 'Implementation\\Of\\OCP\\Files\\ObjectStore\\IObjectStore',\n'arguments' => [\n...\n],\n],\n];\nAmazon S3\nThe S3 backend mounts a bucket of the Amazon S3 object store into the virtual filesystem. The class to be used is\nOCA\\Files_Primary_S3\\S3Storage\n, as in the following example:\n<?php\n$CONFIG = [\n'objectstore' => [\n'class' => 'OCA\\Files_Primary_S3\\S3Storage',\n'arguments' => [\n//\n// replace with your bucket\n'bucket' => 'owncloud',\n//\n// uncomment to indicate available storage size in the objectstore in bytes (in this example 1TB),\n// without this setting, apps relying on available storage might be limited in funcionality e.g. 'concurrency' => 3,\n// storage specific options\n'options' => [\n// version and region are required\n'version' => '2006-03-01',\n// change to your region\n'region'  => 'eu-central-1',\n'credentials' => [\n// replace key and secret with your credentials\n'key' => 'owncloud123456',\n'secret' => 'secret123456',\n],\n],\n],\n],\n];\nCeph S3\nThe S3 backend can also be used to mount the bucket of a Ceph S3 object store via the Amazon S3 API into the virtual filesystem. The class to be used is\nOCA\\Files_Primary_S3\\S3Storage\n:\n<?php\n$CONFIG = [\n'objectstore' => [\n'class' => 'OCA\\Files_Primary_S3\\S3Storage',\n'arguments' => [\n//\n// replace with your bucket\n'bucket' => 'owncloud',\n//\n// uncomment to indicate available storage size in the objectstore, in bytes (in this example 1TB),\n// without this setting, apps relying on available storage might be limited in funcionality e.g. 'concurrency' => 5,\n// storage specific options\n'options' => [\n// version and region are required\n'version' => '2006-03-01',\n'region'  => '',\n// replace key, secret and bucket with your credentials\n'credentials' => [\n// replace key and secret with your credentials\n'key'    => 'owncloud123456',\n'secret' => 'secret123456',\n],\n// replace the ceph endpoint with your rgw url\n'endpoint' => 'http://ceph:80/',\n// Use path style when talking to ceph\n'use_path_style_endpoint' => true,\n],\n],\n],\n];\nScality S3\nThe S3 backend can also be used to mount the bucket of a Scality S3 object store via the Amazon S3 API into the virtual filesystem. The class to be used is\nOCA\\Files_Primary_S3\\S3Storage\n:\n<?php\n$CONFIG = [\n'objectstore' => [\n'class' => 'OCA\\Files_Primary_S3\\S3Storage',\n'arguments' => [\n//\n// replace with your bucket\n'bucket' => 'owncloud',\n//\n// uncomment to indicate available storage size in the objectstore, in bytes (in this example 1TB),\n// without this setting, apps relying on available storage might be limited in funcionality e.g. 'concurrency' => 5,\n// storage specific options\n'options' => [\n// version and region are required\n'version' => '2006-03-01',\n'region'  => 'us-east-1',\n'credentials' => [\n// replace key and secret with your credentials\n'key' => 'owncloud123456',\n'secret' => 'secret123456',\n],\n'use_path_style_endpoint' => true,\n'endpoint' => 'http://scality:8000/',\n],\n],\n],\n];\nBackblaze S3\nThe S3 backend can also be used to mount the bucket of a Backblaze S3 object store via the Amazon S3 API into the virtual filesystem. The class to be used is\nOCA\\Files_Primary_S3\\S3Storage\n:\n<?php\n$CONFIG = [\n'objectstore' => [\n'class' => 'OCA\\Files_Primary_S3\\S3Storage',\n'arguments' => [\n// replace with your bucket\n'bucket' => 'owncloud',\n// uncomment to enable server side encryption\n//'serversideencryption' => 'AES256',\n//\n// part size, in bytes, to use when doing a multipart upload. 'concurrency' => 5,\n//\n'options' => [\n// version and region are required\n'version' => 'latest',\n// replace with your region\n'region'  => 'us-west-004',\n'credentials' => [\n// replace key and secret with your credentials\n'key' => 'owncloud123456',\n'secret' => 'secret123456',\n],\n'use_path_style_endpoint' => true,\n// replace with your endpoint\n'endpoint' => 'https://s3.us-west-004.backblazeb2.com',\n],\n],\n],\n];\nWasabi S3\nThe S3 backend can also be used to mount the bucket of a Wasabi S3 object store via the Amazon S3 API into the virtual filesystem. The class to be used is\nOCA\\Files_Primary_S3\\S3Storage\n:\n<?php\n$CONFIG = [\n'objectstore' => [\n'class' => 'OCA\\Files_Primary_S3\\S3Storage',\n'arguments' => [\n// replace with your Wasabi bucket name\n'bucket' => 'owncloud',\n// uncomment to enable server side encryption."
        },
        {
            "cluster": 3,
            "chunk_content": "An excellent example is the\nEncryption app\n, which fetches critical files in addition to any requested file, which results in significant overhead. This value must be between 5MB and 5GB, inclusive. this must between 5 MB and 5 GB, inclusive. this must between 5 MB and 5 GB, inclusive. this must between 5 MB and 5 GB, inclusive. this must between 5 MB and 5 GB, inclusive. // This can be adjusted higher to allow for more concurrent connections."
        },
        {
            "cluster": 4,
            "chunk_content": "See the configuration examples below how to enable it. Configuration\nCopy the following relevant example part to your\nconfig.php\nfile. 'concurrency' => 5,\n//\n'options' => [\n// version and region are required\n'version' => 'latest',\n// replace with your Wasabi region. Review the Wasabi documentation for the region names. 'region'  => 'us-east-2',\n'credentials' => [\n// replace key and secret with your Wasabi credentials that allow access to the bucket. 'key' => 'wasabi-access-key-here',\n'secret' => 'wasabi-secret-key-here',\n],\n// path style can either be used (true) or not (false)."
        },
        {
            "cluster": 1,
            "chunk_content": "'part_size' => 5242880,\n// maximum number of concurrent UploadPart operations allowed during the multipart upload. metrics app\n//'availableStorage' => 1099511627776,\n//\n// uncomment to enable server side encryption\n//'serversideencryption' => 'AES256',\n//\n// part size, in bytes, to use when doing a multipart upload. 'part_size' => 5242880,\n// maximum number of concurrent UploadPart operations allowed during the multipart upload. metrics app\n//'availableStorage' => 1099511627776,\n//\n// uncomment to enable server side encryption\n//'serversideencryption' => 'AES256',\n//\n// part size, in bytes, to use when doing a multipart upload. 'part_size' => 5242880,\n// maximum number of concurrent UploadPart operations allowed during the multipart upload. 'part_size' => 5242880,\n// maximum number of concurrent UploadPart operations allowed during the multipart upload. //'serversideencryption' => 'AES256',\n//\n// part size, in bytes, to use when doing a multipart upload. 'part_size' => 5242880,\n// maximum number of concurrent UploadPart operations allowed during the multipart upload."
        }
    ]
}