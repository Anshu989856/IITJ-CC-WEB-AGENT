{
    "file_name": "server_admin_manual_configuration_general_topics_search.html",
    "file_path": "./owncloud_docs\\server_admin_manual_configuration_general_topics_search.html",
    "chunks": [
        {
            "cluster": 2,
            "chunk_content": "Documentation for ownCloud (A Kiteworks Company)\nownCloud Server\nIntroduction\nAdmin Manual\nIntroduction\nUseful Pages\nFAQ\nGDPR\nInstallation\nDeployment Considerations\nDeployment Recommendations\nNFS\nSystem Requirements\nConfiguration Notes and Tips\nInstallation Options\nInstalling With Docker\nManual Installation on Linux\nDetailed Installation Guide\nDetailed Installation on Ubuntu (various versions)\nQuick Installation Guide\nOn Ubuntu 20.04\nOn Ubuntu 22.04\nLinux Package Manager\nLinux Package Manager Installation\nThe Installation Wizard\nTroubleshooting\nChanging Your ownCloud URL\nInstalling and Managing Apps\nSupported Apps\nMedia Viewer\nSELinux Configuration\nUsing Let’s Encrypt SSL Certificates\nUsing Letsencrypt\nApache\nConfiguration\nDatabase\nDatabase Conversion\nDatabase Configuration\nEncryption\nEncryption Configuration\nEncryption Configuration Quick Guide\nExternal Storage\nExternal Storage Configuration\nExternal Storage Authentication Mechanisms\nAmazonS3\nDropbox\nFTP\nGoogle\nLocal\nownCloud\nS3 as Primary\nSFTP\nSMB\nWebDAV\nFiles and Sharing\nBig File Upload Configuration\nManual File Locking\nDefault Files Configuration\nFederated Cloud Sharing Configuration\nFile Sharing Configuration\nFile Versioning\nTransactional File Locking\nPreview Configuration\nMimetypes\nManaging the Trashbin\nIntegration\nMicrosoft Teams\nownCloud App for Splunk\nGeneral Topics\nCode Signing\nImpersonate Users\nFull Text Search\nServer\nActivity Configuration\nBackground Jobs Configuration\nCaching Configuration\nConfig Sample PHP Parameters\nConfig Apps Sample PHP Parameters\nCustom Client Repos\nEmail Configuration\nExcluded Blacklisted Files\nExternal Sites\nHarden Server\nImport SSL Cert\nIndex PHP Less URLs\nOCC Command\nLanguage Configuration\nLegal Settings Configuration\nLogging\nLogging Configuration\nRequest Tracing\nReverse Proxy Configuration\nSecurity\nBrute-Force Protection\nOAuth2\nPassword policy\nSecurity Setup Warnings\nThe HSM (Hardware Security Module) Daemon\nDependency Notes\nServer Tuning\nThird Party PHP Configuration\nVirus Scanner Support\nUI Configuration\nUser\nUser Management\nUser Roles\nReset Admin Password\nReset User Password\nUser Auth FTP SMB IMAP\nUser Auth LDAP\nUser Auth Two-Factor\nUser Auth OAuth2\nUser Provisioning API\nCustom Groups App\nGuests App\nOpenID Connect (OIDC)\nLogin Policies\nMaintenance\nUpgrading\nManual Upgrade\nDatabase Upgrade\nUpgrading from Package\nUsing the Updater App\nUpgrading PHP\nMarketplace Apps\nBackup and Restore\nBackup\nRestore\nMaintenance Mode\nExport and Import Instance Data\nManually Moving Data Folders\nEncryption\nMigrating from User Key to Master Key Encryption\nMigrating to a Different Server\nMigrating to Kiteworks PCN\nEnterprise\nAuthentication\nEnterprise Only Authentication\nKerberos Authentication\nClients\nCustom Client Repos\nCollaboration\nCollabora Online / Secure View\nMicrosoft Office Online / WOPI Integration\nDocument Classification\nClassify Documents and Enforce Policies\nExternal Storage\nLDAP Home Connector Configuration\nSharepoint integration Configuration\nWindows Network Drive Configuration\nWND Configuration Quick Guide\nFile Management\nFile Tagging\nFile Lifecycle Management\nFirewall\nFile Firewall\nInstallation\nInstalling & Upgrading ownCloud Enterprise Edition\nOracle DB Setup & Configuration\nLogging\nAuditing\nReporting\nMetrics\nGenerate a Config Report\nSecurity\nRansomware Protection\nUser Management\nShibboleth Integration\nSAML 2.0 Based SSO\nTroubleshooting\nGeneral Troubleshooting\nPath and Filename Length Limitations\nRetrieve Log Files and Configuration Settings\nRemove Non-Existent Background Jobs\nFound a Mistake? Developer Manual\nIntroduction\nGeneral Contributor Guidelines\nCommunity Code of Conduct\nCoding Style & General Guidelines\nDebugging\nPerformance Considerations\nSecurity Guidelines\nBackporting\nHelp and Communication\nDeveloping ownCloud Core\nIntroduction\nSetup Your Development Environment\nApplication Configuration\nTheming\nTranslation\nCode Standards Compliance\nTesting\nownCloud Test Pilots\nDrone Testing\nUnit Testing\nAcceptance Tests\nUser Interface Testing\nAvailable APIs\nThe External API\nThe Provisioning API\nOCS\nThe OCS Notifications API (v1)\nThe OCS REST API\nThe OCS Recipient API\nThe OCS Share API\nThe OCS TOTP Validation API\nThe OCS User Sync API\nNotify Public Link By Email\nThe Roles API\nWebDAV APIs\nThe Comments API\nThe Custom Groups Management API\nThe Files Versions API\nThe Meta API\nThe Search API\nThe Tags API\nThe Trash Bin API\nThe Public Files API\nApplication Development\nFundamental Concepts\nApplication Metadata\nThe Classloader\nConfiguration\nRouting\nControllers\nTemplates\nJavaScript\nCSS\nMiddleware\nDatabase Connectivity\nBackground Jobs\nLogging\nTesting\nThe DI Container\nFilesystem\nRESTful API\nHooks\nPublishing in the ownCloud Marketplace\nChangelog\nMarket App\nAdvanced Concepts\nCustom Filesystem Caches\nCustom Storage Backends\nNotifications\nStorage Backends\nExternal Storage Backends\nTranslation\nTwo-Factor Providers\nUser Management\nCode Signing\nTutorial\nMinimum Requirements\nThe Request Life Cycle\nThe Core Application Files\nRoutes and Controllers\nDatabase Connectivity\nCreate Template Content\nCreate a Navigation Menu\nAdd JavaScript and CSS\nWiring it Up\nApply the Finishing Touches\nAdd a RESTful API\nWriting Tests\nMobile Development\nAndroid\nLibrary Installation\nExamples\niOS\nLibrary Installation\nExamples\nBugtracker\nCode Reviews\nBug Triaging\nFound a Mistake? ownCloud Server UI\nIntroduction\nThe WebUI\nWeb Interface\nNavigating the WebUI\nPersonal Settings\nGeneral\nStorage\nSharing\nSecurity\nCustom Groups\nFiles\nAccess WebDAV\nSharing Files\nSearch & Full Text Search\nTagging Files\nComments\nVersion Control\nEncrypting Files\nManaging Deleted Files\nLarge File Uploads\nManual File Locking\nFile Lifecycle Management\nPublic Link Shares\nFederated Cloud Sharing\nManaging Connected Browsers and Devices\nOnline Collaboration\nStorage Quotas\nExternal Storage\nConnecting to SharePoint\nDesktop Mobile Sync\nApps\nActivity\nCalendar\nContacts\nMarket\nMedia Viewer App\nIntegration\nMicrosoft Teams\nSynchronization Clients\nSync iOS\nSync KDE\nSync OSX\nSync Thunderbird\nTroubleshooting\nFound a Mistake? ownCloud Server\n10.15\nDesktop App\nnext\n5.3\n5.2\nInfinite Scale Documentation\nnext\n7.1\n7.0\nMobile App for Android\nnext\n4.5\n4.4\nMobile App for iOS\nnext\n12.4\n12.3\nownCloud Main Page\nownCloud Server\nnext\n10.15\n10.14\nownCloud Web User Interfaces\nnext\nownCloud Server\nAdmin Manual\nConfiguration\nGeneral Topics\nFull Text Search\nnext\n10.15\n10.14\nEdit this Page\nFull Text Search\nTable of Contents\nIntroduction\nPrerequisites\nInstallation\nConfiguration\nAuthentication Methods\nNo Authentication\nUser / Password Authentication\nAPI Key Authentication\nSearch External Storage\nConnector Setup\nMigrating to the RelevanceV2 Connector:\nEnhanced Search Capabilities with RelevanceV2\nSave the Configuration\nSet up the ES Index\nResetting the ES Index\nUsing occ Commands\nApp Modes\nActive Mode\nPassive Mode\nChanging the App Mode\nRestrict Search Results\nIndex Metadata Only\nLimit Metadata Search for Groups\nCreate the Index\nIssues\nUser Manual\nKnown Limitations\nIntroduction\nownCloud offers the ability to use full text search via the Full Text Search app connecting to an Elasticsearch Server. This allows users to search not only for file names but also for content within files stored in ownCloud. The\nFull Text Search\napp integrates full text search into ownCloud, powered by Elasticsearch. This document describes how to setup the ownCloud part of the Full Text Search app. Prerequisites\nA fully functioning\nElasticsearch Server 7\n. Version 1.0.0 of the Full Text Search app only works with Elasticsearch version 5.6. With version >=2.0.0 of the app, Elasticsearch version > 7 is required and has been tested and is supported up to version 8.6.2 though newer versions may work without any issues. The\nIngest Attachment Processor Plugin\nlets Elasticsearch extract metadata and text from over a thousand different file types such as PPT, XLS, PDF and more. To install the processor, run the following command from your Elasticsearch installation directory:\nsudo bin/elasticsearch-plugin install ingest-attachment\nPost installing the Plugin, you need to restart the Elasticsearch server:\nsudo service elasticsearch restart\nInstallation\nTo install the app, use the Marketplace app on your ownCloud server or proceed manually:\nDownload and extract the tarball of the\nFull Text Search app\nto the apps directory (or\ncustom apps directory, prefered\n) of your ownCloud instance. Use the\nApp Commands\nto enable the\nsearch_elastic\napplication with:\nsudo -u www-data ./occ app:enable search_elastic\nor enable it via the GUI\nSettings\nAdmin\nApps\nFull Text Search\nEnable\n. Configuration\nTo configure the Full Text Search, go to\nSettings\nAdmin\nSearch\n. Setting this checkmark not only enables search in external storages, but also search in federated shares. The command needs to be run for all  users, or at least the ones using the search app. Anyway, good results are expected to be on top. Examples:\nList app settings\nsudo -u www-data ./occ config:list search_elastic\n{\n\"apps\": {\n\"search_elastic\": {\n\"enabled\": \"yes\",\n\"group\": \"content_searchers\",\n\"installed_version\": \"2.1.0\",\n\"nocontent\": \"false\",\n\"scanExternalStorages\": \"1\",\n\"servers\": \"elastic:xxxxxxx@172.17.0.3:9200\",\n\"types\": \"filesystem\"\n}\n}\n}\nSet app options\nsudo -u www-data ./occ config:app:set \\\nsearch_elastic scanExternalStorages --value 0\nor\nsudo -u www-data ./occ config:app:set \\\nsearch_elastic scanExternalStorages --value 1\nApp Modes\nThe Full Text Search app provides two modes, which are\nactive\nand\npassive\n. Search results will be based on Elasticsearch. Search functionality based on ownCloud core database queries will no longer be used. Search results will still be based on ownCloud core database queries. Changing the App Mode\nsudo -u www-data ./occ config:app:set \\\nsearch_elastic mode --value passive\nor\nsudo -u www-data ./occ config:app:set \\\nsearch_elastic mode --value active\nRestrict Search Results\nIndex Metadata Only\nIf you only want to use the Full Text Search app as a more scalable search on filenames, you can disable content indexing by setting the option\nnocontent\nto\ntrue\n, which defaults to\nfalse\n:\nsudo -u www-data ./occ config:app:set \\\nsearch_elastic nocontent --value true\nYou have to reindex all files if you change this back to\nfalse\n. It may be a more flexible way to go with limiting full text search to certain groups by setting the option\ngroup.nocontent\n, see\nbelow\nfor details. Limit Metadata Search for Groups\nIf you only want to use search for shared filenames, you can disable full text search for specific groups by setting the option\ngroup.nocontent\nto the groups whose users should\nonly\nreceive results based on filenames (not the full path), like users in the group\nnofulltext\nas in the example below:\nsudo -u www-data ./occ config:app:set \\\nsearch_elastic group.nocontent \\\n--value nofulltext\nYou can also configure multiple groups by separating them with comma:\nsudo -u www-data ./occ config:app:set \\\nsearch_elastic group.nocontent \\\n--value nofulltext,anothergroup,\"group with blanks\"\nThis allows a scalable search in shared files without clouding the results with content based hits. Depending on using\nactive\nor\npassive\nmode, you either have to:\nactive mode\n: wait until the job has finished and search is available to users, or\npassive mode\n: users continue to search with ownCloud embedded search and you switch over to active mode when the occ command has finished indexing. User Manual\nTo find out more about the usage, check out the section in the User Manual:\nSearch & Full Text Search\n. Search does currently not work when encrypting files via the encryption app."
        },
        {
            "cluster": 3,
            "chunk_content": "Follow the\nInstallation and Upgrade Guide\nfor your environment. Note that this step is expected to take a lot of time. After checking everything is good, you can remove the old\nLegacy\nconnector from the list of write connectors. This is expected to be slower. Note that step 2 just takes care of new files. This is why step 3 is there. Step 4 is important and you should stop at that point for a while. If something goes wrong, you can still revert things, in particular, you can switch back to the\nLegacy\nconnector. From step 5 the actions are irreversible. If you want to go back, you’ll have to start a new migration. It’s important to notice there isn’t any expected downtime while the migration happens. This step is important, because the red dot will turn green showing that everything has been set up correctly. System cron is recommended, otherwise a lot of jobs might queue up."
        },
        {
            "cluster": 4,
            "chunk_content": "Authentication Methods\nIndependent of the authentication method selected below, you need to provide the URL of the Elasticsearch server. For any of the authentication methods selected, your Elasticsearch server must be prepared upfront. For the URL, both\nHTTP\nand\nHTTPS\nincuding the address and port can be used. The app provides several authentication methods. Select the one of your choice and check out the details for the respective authentication method below:\nNo Authentication\nWhen using\nNo Authentication\n, just fill in the URL of the ES server. User / Password Authentication\nWhen using\nUser / Password Authentication\n, enter the credentials set up on the ES server. Note that the password will be stored encrypted in the ownCloud database. API Key Authentication\nWhen using\nAPI Key Authentication\n, enter the API Key with which the ES server was set up. The API Key needs to be the\nencoded\none,\nnot\nthe\napi_key\nstring. For details see the\nCreate API key API\nat the ES documentation. Known Limitations\nCurrently, the app has the following known limitations:\nIf a shared file is renamed by the sharee (share receiver), the sharee cannot find the file using the new filename. The app does not return results for recieved federated share files. Impersonate Users\nServer\nAbout ownCloud\nThe Secure Collaboration Platform\nNews\nPrivacy statement\nImprint\nResources\nFAQ\nHelp\nSecurity\nChangelog\nGet started\nInteract\nRocket.Chat\nForum\nContribute\nCustomer support\n© Copyright 2011-2025, The ownCloud developers."
        },
        {
            "cluster": 1,
            "chunk_content": "Search External Storage\nDefine if external storage should be included in ES indexing by setting the checkmark accordingly with\nScan external Storages\n. Note that this setting requires to rebuild the index. Connector Setup\nThere are 2 different indexes. The difference between the two is how index data is stored because both provide different capabilities and index in different ways. To populate the new connector with enhanced capabilities, an occ command needs to be run for each user, creating index data accordingly. See the occ command section\nFill a Secondary Index\nfor more details. If you have indexed data already, use the following steps to migrate to the new index scheme:\nAssuming you have the\nLegacy\nconnector set up for\nwrite\nand\nsearch\n. Finally you can completely remove the old index from Elasticsearch. With step 2, you will be writing into both indexes at the same time. Files indexed previously won’t be present in the new index. In this case, use the occ command referenced above with the\nLegacy\nindex. Until step 4, the\nLegacy\nconnector will keep updating the index normally. New files should appear first though this is not a guarantee because the score of a file could be too low. Save the Configuration\nSave the configuration with the\nSave configuration\nbutton. Set up the ES Index\nWhen everything is set up, you can click the button\nSetup index\nwhich will tell the ES server to create the plain empty index and other related internal settings. Resetting the ES Index\nYou can at any time reset the index if required by clicking on\nReset index\nor with an occ command. The index will be recreated afterwards. sudo -u www-data ./occ search:index:reset\nUsing occ Commands\nYou can use the:\nocc Full Text Search command set\nto manage the app. These commands let administrators\ncreate\n,\nrebuild\n,\nreset\n, and\nupdate\nthe search index. For example, the following command resets and recreates the index for all users:\nsudo -u www-data ./occ search:index:reset\nocc Config Commands command set\nto configure the app. Active Mode\nAfter enabling the app, it will be by default in\nactive mode\nFile changes will be indexed in background jobs. Active mode can cause a downtime for search when indexing starts on an already heavily used instance, because it takes a while until all files have been indexed. Passive Mode\nTo do an initial full indexing without the app interfering, it can be put in\npassive\nmode\nThe administrator can run occ commands changing the search configuration without notice to the users. The app will not index any changes by itself. Setting it to\ntrue\ndoes not require reindexing. Create the Index\nWhen everything has been set up and configured, you can initiate creating the index. This must be done with an occ command. sudo -u www-data ./occ search:index:create\nIssues\nWhen the Elasticsearch server is down or the index has not been set up, you may get the following message. Check if the ES server is reachable or if the index was set up properly as one solution to fix the issue. Search results are not updated when a text file is rolled back to an earlier version."
        },
        {
            "cluster": 0,
            "chunk_content": "The\nLegacy\nis the old / current one while the\nRelevanceV2\nis the new one. This results in different search capabilities. The Legacy doesn’t differ from the current search while the RelevanceV2 has new capabilities. Migrating to the RelevanceV2 Connector:\nIf you haven’t indexed anything yet, you are encouraged to set up the connectors you want to use as part of the app configuration. The recommended one is\nRelevanceV2\nfor\nwrite\nand\nsearch\n. Add the\nRelevanceV2\nconnector to the list of\nwrite\nconnectors. The list should have both\nLegacy\nand\nRelevanceV2\n. Run the\nocc search:index:fillSecondary RelevanceV2 <user>\ncommand\n. Once indexed data has been migrated for all users, you can switch the search connector to use the new\nRelevanceV2\nsearch capabilities. When the switch happens in the search connector, the new\nRelevanceV2\nconnector will access the new index, which should have been fully updated. Enhanced Search Capabilities with RelevanceV2\nThe RelevanceV2 can boost scores of recently modified files. Even with the boost, files could score less than older but more relevant files. Additional searches you can do with the \"RelevanceV2\" connector:\nSearch by extension\next:pdf\n,\next:docx\n,\next:gif\n,\next:mp4\n,\next:tar.gz\n,\next:gz\n, etc., any extension is possible\nSearch by size, only in bytes or megabytes\nSearch by byte size:\nsize.b:<8092\n,\nsize.b:>102400\n,\nsize.b:[8092 TO 16184]\nSearch by megabyte size:\nsize.mb:<3\n,\nsize.mb:>9\n,\nsize.mb:[3 TO 9]\nSearch by type: only \"file\" or \"folder\"\ntype:file\n,\ntype:folder\nSearch by date:\nSearch by timestamp:\nmtime:<1678960862\n,\nmtime:>1678960862\n,\nmtime:[1608111372 TO 1678960862]\nSearch by date:\nmtime:<2021-08-25\n,\nmtime:>2023-01-18\n,\nmtime:[2022-01-01 TO 2022-12-31]\nSearch by mimetype:\nmime:image\n,\nmime:gif\n,\nmime:text\nNOTE: To search for the whole mimetype such as \"image/gif\" use\nmime.key:image\\/gif\n. Each search term will narrow the search. For example\nbrown ext:pdf\nwill be interpreted as \"name or content containing brown AND extension = pdf\", so \"brown.pdf\" and \"a brown paper.pdf\" will appear, but not \"brown.txt\" or \"blue.pdf\"\nSome examples of complex searches:\nFiles containing \"confidential\" updated since 2023 whose size is less than 10MB:\nconfidential mtime:>2023-01-01 size.mb:<10\nFolders containing more than 1GB:\ntype:folder size.mb:>1024\nImages between March and June 2020:\nmime:image mtime:[2020-03-01 TO 2020-06-30]\nNote that matching by name is pretty lax, so expect a bunch of unexpected results."
        }
    ]
}