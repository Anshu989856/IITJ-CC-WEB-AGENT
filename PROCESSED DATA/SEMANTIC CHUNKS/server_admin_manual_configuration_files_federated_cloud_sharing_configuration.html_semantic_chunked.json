{
    "file_name": "server_admin_manual_configuration_files_federated_cloud_sharing_configuration.html",
    "file_path": "./owncloud_docs\\server_admin_manual_configuration_files_federated_cloud_sharing_configuration.html",
    "chunks": [
        {
            "cluster": 3,
            "chunk_content": "Documentation for ownCloud (A Kiteworks Company)\nownCloud Server\nIntroduction\nAdmin Manual\nIntroduction\nUseful Pages\nFAQ\nGDPR\nInstallation\nDeployment Considerations\nDeployment Recommendations\nNFS\nSystem Requirements\nConfiguration Notes and Tips\nInstallation Options\nInstalling With Docker\nManual Installation on Linux\nDetailed Installation Guide\nDetailed Installation on Ubuntu (various versions)\nQuick Installation Guide\nOn Ubuntu 20.04\nOn Ubuntu 22.04\nLinux Package Manager\nLinux Package Manager Installation\nThe Installation Wizard\nTroubleshooting\nChanging Your ownCloud URL\nInstalling and Managing Apps\nSupported Apps\nMedia Viewer\nSELinux Configuration\nUsing Let’s Encrypt SSL Certificates\nUsing Letsencrypt\nApache\nConfiguration\nDatabase\nDatabase Conversion\nDatabase Configuration\nEncryption\nEncryption Configuration\nEncryption Configuration Quick Guide\nExternal Storage\nExternal Storage Configuration\nExternal Storage Authentication Mechanisms\nAmazonS3\nDropbox\nFTP\nGoogle\nLocal\nownCloud\nS3 as Primary\nSFTP\nSMB\nWebDAV\nFiles and Sharing\nBig File Upload Configuration\nManual File Locking\nDefault Files Configuration\nFederated Cloud Sharing Configuration\nFile Sharing Configuration\nFile Versioning\nTransactional File Locking\nPreview Configuration\nMimetypes\nManaging the Trashbin\nIntegration\nMicrosoft Teams\nownCloud App for Splunk\nGeneral Topics\nCode Signing\nImpersonate Users\nFull Text Search\nServer\nActivity Configuration\nBackground Jobs Configuration\nCaching Configuration\nConfig Sample PHP Parameters\nConfig Apps Sample PHP Parameters\nCustom Client Repos\nEmail Configuration\nExcluded Blacklisted Files\nExternal Sites\nHarden Server\nImport SSL Cert\nIndex PHP Less URLs\nOCC Command\nLanguage Configuration\nLegal Settings Configuration\nLogging\nLogging Configuration\nRequest Tracing\nReverse Proxy Configuration\nSecurity\nBrute-Force Protection\nOAuth2\nPassword policy\nSecurity Setup Warnings\nThe HSM (Hardware Security Module) Daemon\nDependency Notes\nServer Tuning\nThird Party PHP Configuration\nVirus Scanner Support\nUI Configuration\nUser\nUser Management\nUser Roles\nReset Admin Password\nReset User Password\nUser Auth FTP SMB IMAP\nUser Auth LDAP\nUser Auth Two-Factor\nUser Auth OAuth2\nUser Provisioning API\nCustom Groups App\nGuests App\nOpenID Connect (OIDC)\nLogin Policies\nMaintenance\nUpgrading\nManual Upgrade\nDatabase Upgrade\nUpgrading from Package\nUsing the Updater App\nUpgrading PHP\nMarketplace Apps\nBackup and Restore\nBackup\nRestore\nMaintenance Mode\nExport and Import Instance Data\nManually Moving Data Folders\nEncryption\nMigrating from User Key to Master Key Encryption\nMigrating to a Different Server\nMigrating to Kiteworks PCN\nEnterprise\nAuthentication\nEnterprise Only Authentication\nKerberos Authentication\nClients\nCustom Client Repos\nCollaboration\nCollabora Online / Secure View\nMicrosoft Office Online / WOPI Integration\nDocument Classification\nClassify Documents and Enforce Policies\nExternal Storage\nLDAP Home Connector Configuration\nSharepoint integration Configuration\nWindows Network Drive Configuration\nWND Configuration Quick Guide\nFile Management\nFile Tagging\nFile Lifecycle Management\nFirewall\nFile Firewall\nInstallation\nInstalling & Upgrading ownCloud Enterprise Edition\nOracle DB Setup & Configuration\nLogging\nAuditing\nReporting\nMetrics\nGenerate a Config Report\nSecurity\nRansomware Protection\nUser Management\nShibboleth Integration\nSAML 2.0 Based SSO\nTroubleshooting\nGeneral Troubleshooting\nPath and Filename Length Limitations\nRetrieve Log Files and Configuration Settings\nRemove Non-Existent Background Jobs\nFound a Mistake? Developer Manual\nIntroduction\nGeneral Contributor Guidelines\nCommunity Code of Conduct\nCoding Style & General Guidelines\nDebugging\nPerformance Considerations\nSecurity Guidelines\nBackporting\nHelp and Communication\nDeveloping ownCloud Core\nIntroduction\nSetup Your Development Environment\nApplication Configuration\nTheming\nTranslation\nCode Standards Compliance\nTesting\nownCloud Test Pilots\nDrone Testing\nUnit Testing\nAcceptance Tests\nUser Interface Testing\nAvailable APIs\nThe External API\nThe Provisioning API\nOCS\nThe OCS Notifications API (v1)\nThe OCS REST API\nThe OCS Recipient API\nThe OCS Share API\nThe OCS TOTP Validation API\nThe OCS User Sync API\nNotify Public Link By Email\nThe Roles API\nWebDAV APIs\nThe Comments API\nThe Custom Groups Management API\nThe Files Versions API\nThe Meta API\nThe Search API\nThe Tags API\nThe Trash Bin API\nThe Public Files API\nApplication Development\nFundamental Concepts\nApplication Metadata\nThe Classloader\nConfiguration\nRouting\nControllers\nTemplates\nJavaScript\nCSS\nMiddleware\nDatabase Connectivity\nBackground Jobs\nLogging\nTesting\nThe DI Container\nFilesystem\nRESTful API\nHooks\nPublishing in the ownCloud Marketplace\nChangelog\nMarket App\nAdvanced Concepts\nCustom Filesystem Caches\nCustom Storage Backends\nNotifications\nStorage Backends\nExternal Storage Backends\nTranslation\nTwo-Factor Providers\nUser Management\nCode Signing\nTutorial\nMinimum Requirements\nThe Request Life Cycle\nThe Core Application Files\nRoutes and Controllers\nDatabase Connectivity\nCreate Template Content\nCreate a Navigation Menu\nAdd JavaScript and CSS\nWiring it Up\nApply the Finishing Touches\nAdd a RESTful API\nWriting Tests\nMobile Development\nAndroid\nLibrary Installation\nExamples\niOS\nLibrary Installation\nExamples\nBugtracker\nCode Reviews\nBug Triaging\nFound a Mistake? ownCloud Server UI\nIntroduction\nThe WebUI\nWeb Interface\nNavigating the WebUI\nPersonal Settings\nGeneral\nStorage\nSharing\nSecurity\nCustom Groups\nFiles\nAccess WebDAV\nSharing Files\nSearch & Full Text Search\nTagging Files\nComments\nVersion Control\nEncrypting Files\nManaging Deleted Files\nLarge File Uploads\nManual File Locking\nFile Lifecycle Management\nPublic Link Shares\nFederated Cloud Sharing\nManaging Connected Browsers and Devices\nOnline Collaboration\nStorage Quotas\nExternal Storage\nConnecting to SharePoint\nDesktop Mobile Sync\nApps\nActivity\nCalendar\nContacts\nMarket\nMedia Viewer App\nIntegration\nMicrosoft Teams\nSynchronization Clients\nSync iOS\nSync KDE\nSync OSX\nSync Thunderbird\nTroubleshooting\nFound a Mistake? ownCloud Server\n10.15\nDesktop App\nnext\n5.3\n5.2\nInfinite Scale Documentation\nnext\n7.1\n7.0\nMobile App for Android\nnext\n4.5\n4.4\nMobile App for iOS\nnext\n12.4\n12.3\nownCloud Main Page\nownCloud Server\nnext\n10.15\n10.14\nownCloud Web User Interfaces\nnext\nownCloud Server\nAdmin Manual\nConfiguration\nFiles and Sharing\nFederated Cloud Sharing Configuration\nnext\n10.15\n10.14\nEdit this Page\nConfiguring Federation Sharing\nTable of Contents\nIntroduction\nConfiguration\nWorking With Proxies\nCreating a New Federation Share\nFederated Sharing Scanner CronJob Configuration\nKnown Issues\nTips\nIntroduction\nWith Federated Cloud Sharing, you can easily and securely link file shares between ownCloud servers, in effect creating a \"cloud\" of ownCloud installations. sudo -u www-data ./occ config:app:set federation auto_accept_trusted --value '0'\nsudo -u www-data ./occ config:app:set federatedfilesharing auto_accept_trusted --value 'yes'\nWorking With Proxies\nThere are ownCloud instances that are not connected to the internet. Creating a New Federation Share\nFollow these steps to create a new Federation share between two ownCloud servers. Create a federated share by entering username@serveraddress in the sharing dialog (for example\nfreda@https://example.com/owncloud\n). Exit the database console with this command:\nquit\nDefault Files Configuration\nFile Sharing Configuration\nAbout ownCloud\nThe Secure Collaboration Platform\nNews\nPrivacy statement\nImprint\nResources\nFAQ\nHelp\nSecurity\nChangelog\nGet started\nInteract\nRocket.Chat\nForum\nContribute\nCustomer support\n© Copyright 2011-2025, The ownCloud developers."
        },
        {
            "cluster": 2,
            "chunk_content": "For security reasons federated sharing\nstrictly requires HTTPS (SSL/TLS)\n. If you want to use HTTP for development and testing purposes, you have to set\n'sharing.federation.allowHttpFallback' ⇒ true,\nin\nconfig/config.php\n. Lock icon in the address bars in Firefox, Google Chrome, and Safari\nVerify that the\n'overwrite.cli.url' ⇒ 'https://<SERVER_URL>'\nsetting is configured to the correct URL instead of\nlocalhost\nin\nconfig.php\n:\nNavigate to\nAdmin settings\nSharing\nFederation\nAdd\nserver 1\nto the trusted servers on\nserver 2\nAdd\nserver 2\nto the trusted servers on\nserver 1\nRun on both servers:\nsudo -u www-data ./occ system:cron\nRun the\nOCA\\Federation\\SyncJob\njob with the\nforce\noption on both servers. This is done because of security concerns. They have no possibility to reach the public network. Therefore Federation will not work without a proxy. Set the\nproxy\nand\nproxyuserpwd\nconfiguration variables, in\nconfig/config.php\n. proxy\nsets the proxy’s hostname, and\nproxyuserpwd\nsets the username and password credentials, in\nusername:password\nformat. This requires no action by the user on the remote server; all it takes is a few steps on the originating server. Enable the Federation app. However, this isn’t the case."
        },
        {
            "cluster": 0,
            "chunk_content": "Configuration\nFollow these steps to establish a trusted connection between two servers. Verify that both servers have SSL certificates. If you open the server URL in your browser and see a lock icon on the left-hand side of the address bar, the certificate is valid:\nFigure 1."
        },
        {
            "cluster": 1,
            "chunk_content": "You can get the corresponding job ID by using the\nbackground:queue:status\nocc command:\nsudo -u www-data ./occ background:queue:execute --force <jobId>\nThe check should now be green\nNow sync your users by running on both servers\nsudo -u www-data ./occ dav:sync-system-addressbook\nsudo -u www-data ./occ federation:sync-addressbook\nConfigure automatic acceptance of new federated shares\nAutomatic acceptance of new federated shares will not work if the option\nAdd server automatically once a federated share was created successfully\nis also set. When ownCloud verifies the link,\nit displays it with the\n(federated)\nlabel. Click on this label to establish the link. Federated Sharing Scanner CronJob Configuration\nAs part of the migration step to 10.5, before enabling the cronjob described below, make sure to remove the system cron job from your crontab that executes legacy\nocc incoming-shares:poll\nThe Federated Sharing Scanner is a background job used to scan the federated shares to ensure the integrity of the file cache. On each run the scanner will select federated shares that satisfy these requirements:\nensure that within a single cron run, at max [cronjob_scan_external_batch] scans will be performed out of all accepted external shares (default 100)\na scan of that external share has not been performed within the last [cronjob_scan_external_min_scan] seconds (default 3 hours)\nthe user still exists, and has been active recently, meaning logged in within the last [cronjob_scan_external_min_login] seconds (default 24 hours)\nthere has been a change in the federated remote share root etag or mtime, signaling a mandatory rescan\nTo enable the cronjob, go to\nSettings\nAdmin Settings\nFederated Cloud Sharing\nand enable the checkbox:\nAlternatively you can use the command line:\nsudo -u www-data ./occ config:app:set files_sharing cronjob_scan_external_enabled --value 'yes'\nYou can also configure these settings of the cronjob:\nthe minimum amount of time since last login of a user so that a scan is triggered (ensures only active users get fed shares synced)\nsudo -u www-data ./occ config:app:set files_sharing cronjob_scan_external_min_login --value <integer-seconds>\nthe minimum amount of time since last scanned so that the next scan is triggered (avoid frequent scan when active collaboration)\nsudo -u www-data ./occ config:app:set files_sharing cronjob_scan_external_min_scan --value <integer-seconds>\nthe maximum number of federated share scans per 10 minutes (scan performed only if fed share files got updated)\nsudo -u www-data ./occ config:app:set files_sharing cronjob_scan_external_batch --value <integer-number>\nUse the following command to force a run of the scanner cronjob:\nsudo -u www-data ./occ background:queue:execute --force --accept-warning <id-of-fed-scanner-job>\nKnown Issues\nPersistent Locks Are Not Guaranteed\nThere is a known bug in propagation of persistent locks to federated instances. Tips\nVCARD properties\nIt is possible to configure the VCARD properties that are searched in order to retrieve a list of federated users in the share dialog. By default, ownCloud uses CLOUD and FN properties, however this list may be configured by the admin:\nsudo -u www-data ./occ config:app:set dav remote_search_properties --value=CLOUD,FN,EMAIL\nPossible values are:\nVERSION\nUID\nFN\nN\nEMAIL\nCLOUD\nThe value\nCLOUD\nenables searching by federation ID. Note that when\nEMAIL\nor\nCLOUD\nare enabled, hostnames are included in the search. Results are then returned for substrings of the hostname part, even when no user related field matches. Listing Federated Shares\nIn case you want to see which federated shares exist on your server, you can use this command to list them. Currently there is no ownCloud\nocc\ncommand to list federated shares, that’s why you have to use these database queries to obtain the information. Federated shares are saved in your database. sudo mysql -u <ownCloud_DB_User> -p<ownCloud_DB_Password> -h <ownCloud_DB_Host> <ownCloud_DB_Name>\nIncoming shares can be listed with the following query:\nselect * from oc_share where share_type=6;\nEach unique ID gives you an incoming federated share. Outgoing shares can be listed with the following query: (replace\ncloud.example.com\nwith your instance URL)\nselect * from oc_share_external where remote NOT IN ('https//cloud.example.com');\nEach unique ID gives you an outgoing federated share."
        },
        {
            "cluster": 4,
            "chunk_content": "When the link is successfully completed, you have a single share option, and that is\ncan edit\n. You may disconnect the share at any time by clicking the\ntrash can\nicon. If a user creates an exclusive lock on a share, no other users should be able to modify it, nor its contents, and all users should see a lock icon on the share. The following functionality has been recorded:\nThe user who created the lock sees the lock icon throughout the share. The top-level of the share for receivers shows the lock icon. Sub-items of the share\ndo not show the lock icon\n. The share and its contents\ncan still be modified by all users\n; specifically:\nSub-items\ncan be deleted\n. Sub-items\ncan be created\n."
        }
    ]
}