{
    "file_name": "server_admin_manual_configuration_files_previews_configuration.html",
    "file_path": "./owncloud_docs\\server_admin_manual_configuration_files_previews_configuration.html",
    "chunks": [
        {
            "cluster": 2,
            "chunk_content": "Documentation for ownCloud (A Kiteworks Company)\nownCloud Server\nIntroduction\nAdmin Manual\nIntroduction\nUseful Pages\nFAQ\nGDPR\nInstallation\nDeployment Considerations\nDeployment Recommendations\nNFS\nSystem Requirements\nConfiguration Notes and Tips\nInstallation Options\nInstalling With Docker\nManual Installation on Linux\nDetailed Installation Guide\nDetailed Installation on Ubuntu (various versions)\nQuick Installation Guide\nOn Ubuntu 20.04\nOn Ubuntu 22.04\nLinux Package Manager\nLinux Package Manager Installation\nThe Installation Wizard\nTroubleshooting\nChanging Your ownCloud URL\nInstalling and Managing Apps\nSupported Apps\nMedia Viewer\nSELinux Configuration\nUsing Let’s Encrypt SSL Certificates\nUsing Letsencrypt\nApache\nConfiguration\nDatabase\nDatabase Conversion\nDatabase Configuration\nEncryption\nEncryption Configuration\nEncryption Configuration Quick Guide\nExternal Storage\nExternal Storage Configuration\nExternal Storage Authentication Mechanisms\nAmazonS3\nDropbox\nFTP\nGoogle\nLocal\nownCloud\nS3 as Primary\nSFTP\nSMB\nWebDAV\nFiles and Sharing\nBig File Upload Configuration\nManual File Locking\nDefault Files Configuration\nFederated Cloud Sharing Configuration\nFile Sharing Configuration\nFile Versioning\nTransactional File Locking\nPreview Configuration\nMimetypes\nManaging the Trashbin\nIntegration\nMicrosoft Teams\nownCloud App for Splunk\nGeneral Topics\nCode Signing\nImpersonate Users\nFull Text Search\nServer\nActivity Configuration\nBackground Jobs Configuration\nCaching Configuration\nConfig Sample PHP Parameters\nConfig Apps Sample PHP Parameters\nCustom Client Repos\nEmail Configuration\nExcluded Blacklisted Files\nExternal Sites\nHarden Server\nImport SSL Cert\nIndex PHP Less URLs\nOCC Command\nLanguage Configuration\nLegal Settings Configuration\nLogging\nLogging Configuration\nRequest Tracing\nReverse Proxy Configuration\nSecurity\nBrute-Force Protection\nOAuth2\nPassword policy\nSecurity Setup Warnings\nThe HSM (Hardware Security Module) Daemon\nDependency Notes\nServer Tuning\nThird Party PHP Configuration\nVirus Scanner Support\nUI Configuration\nUser\nUser Management\nUser Roles\nReset Admin Password\nReset User Password\nUser Auth FTP SMB IMAP\nUser Auth LDAP\nUser Auth Two-Factor\nUser Auth OAuth2\nUser Provisioning API\nCustom Groups App\nGuests App\nOpenID Connect (OIDC)\nLogin Policies\nMaintenance\nUpgrading\nManual Upgrade\nDatabase Upgrade\nUpgrading from Package\nUsing the Updater App\nUpgrading PHP\nMarketplace Apps\nBackup and Restore\nBackup\nRestore\nMaintenance Mode\nExport and Import Instance Data\nManually Moving Data Folders\nEncryption\nMigrating from User Key to Master Key Encryption\nMigrating to a Different Server\nMigrating to Kiteworks PCN\nEnterprise\nAuthentication\nEnterprise Only Authentication\nKerberos Authentication\nClients\nCustom Client Repos\nCollaboration\nCollabora Online / Secure View\nMicrosoft Office Online / WOPI Integration\nDocument Classification\nClassify Documents and Enforce Policies\nExternal Storage\nLDAP Home Connector Configuration\nSharepoint integration Configuration\nWindows Network Drive Configuration\nWND Configuration Quick Guide\nFile Management\nFile Tagging\nFile Lifecycle Management\nFirewall\nFile Firewall\nInstallation\nInstalling & Upgrading ownCloud Enterprise Edition\nOracle DB Setup & Configuration\nLogging\nAuditing\nReporting\nMetrics\nGenerate a Config Report\nSecurity\nRansomware Protection\nUser Management\nShibboleth Integration\nSAML 2.0 Based SSO\nTroubleshooting\nGeneral Troubleshooting\nPath and Filename Length Limitations\nRetrieve Log Files and Configuration Settings\nRemove Non-Existent Background Jobs\nFound a Mistake? Developer Manual\nIntroduction\nGeneral Contributor Guidelines\nCommunity Code of Conduct\nCoding Style & General Guidelines\nDebugging\nPerformance Considerations\nSecurity Guidelines\nBackporting\nHelp and Communication\nDeveloping ownCloud Core\nIntroduction\nSetup Your Development Environment\nApplication Configuration\nTheming\nTranslation\nCode Standards Compliance\nTesting\nownCloud Test Pilots\nDrone Testing\nUnit Testing\nAcceptance Tests\nUser Interface Testing\nAvailable APIs\nThe External API\nThe Provisioning API\nOCS\nThe OCS Notifications API (v1)\nThe OCS REST API\nThe OCS Recipient API\nThe OCS Share API\nThe OCS TOTP Validation API\nThe OCS User Sync API\nNotify Public Link By Email\nThe Roles API\nWebDAV APIs\nThe Comments API\nThe Custom Groups Management API\nThe Files Versions API\nThe Meta API\nThe Search API\nThe Tags API\nThe Trash Bin API\nThe Public Files API\nApplication Development\nFundamental Concepts\nApplication Metadata\nThe Classloader\nConfiguration\nRouting\nControllers\nTemplates\nJavaScript\nCSS\nMiddleware\nDatabase Connectivity\nBackground Jobs\nLogging\nTesting\nThe DI Container\nFilesystem\nRESTful API\nHooks\nPublishing in the ownCloud Marketplace\nChangelog\nMarket App\nAdvanced Concepts\nCustom Filesystem Caches\nCustom Storage Backends\nNotifications\nStorage Backends\nExternal Storage Backends\nTranslation\nTwo-Factor Providers\nUser Management\nCode Signing\nTutorial\nMinimum Requirements\nThe Request Life Cycle\nThe Core Application Files\nRoutes and Controllers\nDatabase Connectivity\nCreate Template Content\nCreate a Navigation Menu\nAdd JavaScript and CSS\nWiring it Up\nApply the Finishing Touches\nAdd a RESTful API\nWriting Tests\nMobile Development\nAndroid\nLibrary Installation\nExamples\niOS\nLibrary Installation\nExamples\nBugtracker\nCode Reviews\nBug Triaging\nFound a Mistake? ownCloud Server UI\nIntroduction\nThe WebUI\nWeb Interface\nNavigating the WebUI\nPersonal Settings\nGeneral\nStorage\nSharing\nSecurity\nCustom Groups\nFiles\nAccess WebDAV\nSharing Files\nSearch & Full Text Search\nTagging Files\nComments\nVersion Control\nEncrypting Files\nManaging Deleted Files\nLarge File Uploads\nManual File Locking\nFile Lifecycle Management\nPublic Link Shares\nFederated Cloud Sharing\nManaging Connected Browsers and Devices\nOnline Collaboration\nStorage Quotas\nExternal Storage\nConnecting to SharePoint\nDesktop Mobile Sync\nApps\nActivity\nCalendar\nContacts\nMarket\nMedia Viewer App\nIntegration\nMicrosoft Teams\nSynchronization Clients\nSync iOS\nSync KDE\nSync OSX\nSync Thunderbird\nTroubleshooting\nFound a Mistake? ownCloud Server\n10.15\nDesktop App\nnext\n5.3\n5.2\nInfinite Scale Documentation\nnext\n7.1\n7.0\nMobile App for Android\nnext\n4.5\n4.4\nMobile App for iOS\nnext\n12.4\n12.3\nownCloud Main Page\nownCloud Server\nnext\n10.15\n10.14\nownCloud Web User Interfaces\nnext\nownCloud Server\nAdmin Manual\nConfiguration\nFiles and Sharing\nPreview Configuration\nnext\n10.15\n10.14\nEdit this Page\nPreviews Configuration\nTable of Contents\nIntroduction\nImportant Considerations\nDefault Preview Providers\nPrerequisites\nNotes for PDF Preview Generation\nNotes for Video Preview Generation\nList Extensions Used for the Preview Generation\nPreview Format Requirements\nManaging Your Preview Settings\nDisabling Previews\nAdding a Preview Provider\nMaximum Image Dimensions\nMaximum Preview Size\nMaximum scale factor\nDefine the JPEG Preview Quality\nIntroduction\nThe ownCloud preview system generates thumbnails and previews of files for all ownCloud apps that display files such as the Files or the Files Mediaviewer app. ownCloud does NOT take any responsibility for any issues. This means that each first folder access may create additional load on the server. For more information see:\nPHP imagejpeg — Output image to browser or file\nTransactional File Locking\nMimetypes\nAbout ownCloud\nThe Secure Collaboration Platform\nNews\nPrivacy statement\nImprint\nResources\nFAQ\nHelp\nSecurity\nChangelog\nGet started\nInteract\nRocket.Chat\nForum\nContribute\nCustomer support\n© Copyright 2011-2025, The ownCloud developers."
        },
        {
            "cluster": 3,
            "chunk_content": "The following image shows some examples of previews of various file types. By default, ownCloud can generate previews for the following filetypes:\nImages files\nCover of MP3 files\nText documents\nownCloud supports the preview generation of file types such as PDF, SVG or various office documents. These document types can be a security issue as they can have javascript or other code either embedded or linked. Be careful enabling preview thumbnail generation for documents which could contain or reference executable code! Important Considerations\nRendering takes place when the user accesses the folder and the preview has not been generated before. Previews are not a shared resource but rendered for each user individually. Preview generation can only be set for the system and not for individual mounts. When enabling preview generation for SVG, the preview code checks for the existence of\nxlink:href\nto external resources and disallows creating a preview. Such a check is not made for PDF or Office documents and enabling the creation of previews for those documents can be therefore a\nserious security issue\n. When enabling preview generation for videos (or huge image files), consider the following points:\nBecause the video needs to be downloaded before a preview can be created, this may impact general accessibility of files for other users if the video resides on an external mount point with limited bandwidth like Google Drive. Preview generation for videos is in general a resource intensive process. Default Preview Providers\nPlease note that the ownCloud preview system comes already with sensible defaults, and therefore it is usually not necessary to adjust those configuration values. If you want to configure previews, add or change the following parameters in\nconfig/config.php\n. The default list of enabled preview providers which do not need to be explicitly enabled in the config are:\nOC\\Preview\\BMP\nOC\\Preview\\GIF\nOC\\Preview\\JPEG\nOC\\Preview\\WEBP\nOC\\Preview\\MarkDown\nOC\\Preview\\MP3\nOC\\Preview\\PNG\nOC\\Preview\\TXT\nOC\\Preview\\XBitmap\nIf you want to add or change the default list, you MUST define all elements used. Prerequisites\nWhen defining your own preview providers, some things need to be considered. For some file types, ownCloud uses ImageMagick to generate previews. This version of ImageMacick is\nnot\ncapable of processing additional file formats like SVG or HEIC and many others. Notes for PDF Preview Generation\nIf you handle the security risk and decide to allow creating previews for PDF files, change the following imagick security policy. Please also make sure, that ghostscript is installed and the PDF format is listed when invoking the following command:\nconvert -list format | grep -i pdf\nNotes for Video Preview Generation\nTo be able to create previews for video files when using the\nOC\\Preview\\Movie\nprovider, you must install\nffmpeg\n. sudo apt install -y ffmpeg\nList Extensions Used for the Preview Generation\nTo get a list of file extensions linked to the image or video provider, change into the\nowncloud\ndirectory and run the following example command. Note that if you do this all previews in all apps are disabled and will display generic icons instead of thumbnails. Set the configuration option\nenable_previews\nto\nfalse\n:\n'enable_previews' => false,\nAdding a Preview Provider\nThe example below adds the preview provider for\nSGI\nand\nHEIC\nimages:\n'enabledPreviewProviders' => [\n'OC\\Preview\\SGI',\n'OC\\Preview\\Heic',\n'OC\\Preview\\BMP',\n'OC\\Preview\\GIF',\n'OC\\Preview\\JPEG',\n'OC\\Preview\\MarkDown',\n'OC\\Preview\\MP3',\n'OC\\Preview\\PNG',\n'OC\\Preview\\TXT',\n'OC\\Preview\\XBitmap',\n],\nYou have to add all default providers if you do not want to disable them."
        },
        {
            "cluster": 0,
            "chunk_content": "This minimizes the risk, but does not eliminate it. If you just declare an additional item, only this item will be taken and none of the default list. Use a different filter for other provider types. Setting a value takes immediate effect and nothing needs to be regenerated as it is for display requests only."
        },
        {
            "cluster": 1,
            "chunk_content": "The server may report timeouts if there are multiple videos to render and/or if the video is big. There can be significant load on the server during conversion when video thumbnail generation is enabled. Maximum Image Dimensions\nImages up to a certain size feature preview generation (thumbnails and media viewer renderings). Images above that size show a default icon. The following example would change the limit so that 24MP portrait images also feature preview generation:\n'preview_max_dimensions' => '6016x6016',\nThe dimensions here limit the size of the original image (input to the preview generator). A setting below limits the size of the generated preview images (output). For more details see the\nDefine the maximum dimensions of the original image for preview generation\n. Maximum Preview Size\nThere are two configuration options for setting the maximum size (in pixels) of a preview. These are\npreview_max_x\nwhich represents the x-axis and\npreview_max_y\nwhich represents the y-axis. The following example would limit previews to a maximum size of 100 px × 100 px:\n'preview_max_x' => 100,\n'preview_max_y' => 100,\nIf you want no limit applied for one or both of these values then set them to\nnull\n. Maximum scale factor\nIf a lot of small pictures are stored on the ownCloud instance and the preview system generates blurry previews, you might want to consider setting a maximum scale factor. By default, pictures are upscaled to 10 times the original size:\n'preview_max_scale_factor' => 10,\nIf you want to disable scaling at all, you can set the config value to `1':\n'preview_max_scale_factor' => 1,\nIf you want to disable the maximum scaling factor, you can set the config value to\nnull\n:\n'preview_max_scale_factor' => null,\nDefine the JPEG Preview Quality\nThe JP(E)G image quality can be defined in [%] for displaying thumbnails and image previews for apps like Files or Files Mediaviewer. Note that this setting is for displaying only and has no impact on the stored thumbnail / preview quality or size. 'previewJPEGImageDisplayQuality' => -1,\nThe scale ranges from 1 to 100, where 1 is the lowest and 100 the highest. It defaults to -1 which is equivalent to approximately 75% of the original image quality. Consider that any value over 80 may result in an unnecessary increase of the displayed image and has larger response sizes when requesting images, without much increase of the image quality. Usually it is not necessary to have a quality setting over 75, but it can be increased if there is the need to display previews in high quality with the cost that every image requested generates a higher response load. Note that this setting does not affect downloading images."
        },
        {
            "cluster": 4,
            "chunk_content": "By default, the delivered version of ImageMagick for Ubuntu 20.04 is version 6, and the wrapper for php is version 3.4. If you want to use those providers, you must upgrade ImageMagick to version 7 and the php wrapper to version 3.5. See the\nphp-imagick Library\nsection in the installation guide for more information. Use an editor of your choice like\nnano\nand change the following file, adapt the path if using ImageMagick 7:\nsudo nano /etc/ImageMagick-6/policy.xml\nor\nsudo nano /etc/ImageMagick-7/policy.xml\nSearch for the following content:\n<policy domain=\"coder\" rights=\"none\" pattern=\"PDF\" />\nand change:\nrights=\"none\" --> rights=\"read|write\"\nAfter changing the policy file for ImageMagick, restart your Apache web server or your php-fpm service. ImageMagick uses ghostscript for converting PDF. cat resources/config/mimetypemapping.dist.json | grep image\nPreview Format Requirements\nThe following providers require the php\nimagick\nextension to be enabled (check\nphpinfo();\n) and compiled with support for these formats:\nOC\\Preview\\AI\nOC\\Preview\\EPS\nOC\\Preview\\Heic\nOC\\Preview\\PDF\nOC\\Preview\\PSD\nOC\\Preview\\SGI\nOC\\Preview\\SVG\nOC\\Preview\\TIFF\nOC\\Preview\\TTF\nThe following providers are only available if either LibreOffice or OpenOffice is installed on the server:\nOC\\Preview\\MSOfficeDoc\nOC\\Preview\\MSOffice2003\nOC\\Preview\\MSOffice2007\nOC\\Preview\\OpenDocument\nOC\\Preview\\StarOffice\nThe following providers are available, but disabled by default due to performance or privacy/security concerns:\nOC\\Preview\\Font\nOC\\Preview\\Illustrator\nOC\\Preview\\Movie\nOC\\Preview\\MSOfficeDoc\nOC\\Preview\\MSOffice2003\nOC\\Preview\\MSOffice2007\nOC\\Preview\\OpenDocument\nOC\\Preview\\StarOffice\nOC\\Preview\\SVG\nOC\\Preview\\PDF\nOC\\Preview\\Photoshop\nOC\\Preview\\Postscript\nOC\\Preview\\TIFF\nManaging Your Preview Settings\nDisabling Previews\nUnder certain circumstances, for example if the server has limited resources, you might want to consider disabling the generation of previews. The default value is defined in\nconfig/config.sample.php\nas\n6016x4000\nwhich is sufficient for 24MP landscape images. The default value you can reference in\nconfig/config.sample.php\nis set to 2048."
        }
    ]
}